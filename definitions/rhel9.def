Bootstrap: docker
From: rockylinux:9

%setup
    mkdir -p ${APPTAINER_ROOTFS}/shared

%post
    dnf update -y
    dnf install -y dnf-utils dnf-plugins-core
    dnf config-manager --set-enabled crb
    dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm

    dnf -y groupinstall "Development Tools"
    dnf install -y \
        rpm-build \
        gcc \
        make \
        autoconf \
        automake \
        libtool \
        dkms \
        kernel-devel \
        kernel-headers \
        libtirpc-devel \
        libblkid-devel \
        libuuid-devel \
        libudev-devel \
        openssl-devel \
        zlib-devel \
        libaio-devel \
        libattr-devel \
        elfutils-libelf-devel \
        python3 \
        python3-devel \
        python3-setuptools \
        python3-cffi \
        libffi-devel \
        ncompress \
        lsscsi \
        parted

    dnf clean all
